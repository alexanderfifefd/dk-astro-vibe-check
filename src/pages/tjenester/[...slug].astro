---
import Layout from '../../layouts/Layout.astro';
import HeroSecondary from '../../components/HeroSecondary.astro';
import Container from '../../components/Container.astro';
import Button from '../../components/Button.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const services = await getCollection('tjenester');
  return services.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<Layout title={entry.data.title} description={entry.data.description}>
  <HeroSecondary title={entry.data.title} description={entry.data.description} />

  <section class="py-12">
    <Container>
      <div class="max-w-3xl prose">
        <Content />
      </div>

      <div class="max-w-3xl mt-12 pt-8 border-t border-border flex flex-wrap gap-3">
        <Button href="/tjenester" variant="secondary" size="sm">&larr; Alle tjenester</Button>
        {entry.data.url && (
          <Button href={entry.data.url} variant="primary" size="sm">
            GÃ¥ til {entry.data.title} &rarr;
          </Button>
        )}
      </div>
    </Container>
  </section>
</Layout>
